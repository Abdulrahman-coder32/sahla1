<div class="applications-container">
  <!-- Unread Notifications Badge -->
  <div *ngIf="unreadNotifications > 0"
       class="notification-badge">
    <i class="fas fa-bell"></i>
    <span>{{ unreadNotifications }} إشعار جديد</span>
    <button (click)="clearNotifications()" class="close-btn">×</button>
  </div>

  <div class="max-w-7xl mx-auto">
    <!-- Loading -->
    <div *ngIf="loading" class="loading-state">
      <div class="spinner"></div>
      <p>جاري تحميل المتقدمين...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && applications.length === 0" class="empty-state">
      <i class="fas fa-users-slash"></i>
      <h3>لا يوجد متقدمين حاليًا</h3>
      <p>عندما يتقدم أحد الباحثين عن عمل، سيظهر هنا فورًا.</p>
    </div>

    <!-- Applications List -->
    <div *ngIf="!loading && applications.length > 0" class="applications-list">
      <div *ngFor="let app of applications" class="application-card">
        <div class="applicant-info">
          <img [src]="getSeekerImage(app)"
               [alt]="app.seeker_id?.name || 'متقدم'"
               class="applicant-image">

          <div class="applicant-details">
            <h3 class="applicant-name">
              {{ app.seeker_id?.name || 'غير معروف' }}
              <span class="applicant-age">(العمر: {{ app.seeker_id?.age || 'غير محدد' }})</span>
            </h3>

            <div class="info-grid">
              <div class="info-item">
                <i class="fas fa-envelope"></i>
                <div>
                  <span class="info-label">البريد الإلكتروني</span>
                  <span class="info-value">{{ maskEmail(app.seeker_id?.email) }}</span>
                </div>
              </div>

              <div class="info-item">
                <i class="fas fa-map-marker-alt"></i>
                <div>
                  <span class="info-label">الموقع</span>
                  <span class="info-value">{{ app.seeker_id?.governorate }} - {{ app.seeker_id?.city }}</span>
                </div>
              </div>

              <div class="info-item">
                <i class="fas fa-briefcase"></i>
                <div>
                  <span class="info-label">الخبرة</span>
                  <span class="info-value">{{ app.seeker_id?.work_experience || 'غير محددة' }}</span>
                </div>
              </div>
            </div>

            <div class="application-message">
              <p class="message-title">
                <i class="fas fa-comment-dots"></i>
                رسالة التقديم:
              </p>
              <p class="message-text">{{ app.message }}</p>
            </div>
          </div>
        </div>

        <div class="application-actions">
          <span [class]="getStatusClass(app.status)" class="status-badge">
            <i [class]="getStatusIcon(app.status)"></i>
            {{ getStatusText(app.status) }}
          </span>

          <div class="action-buttons" *ngIf="app.status === 'pending'">
            <button (click)="acceptApplication(app._id)" class="btn-accept">
              <i class="fas fa-check"></i> قبول
            </button>
            <button (click)="rejectApplication(app._id)" class="btn-reject">
              <i class="fas fa-times"></i> رفض
            </button>
          </div>

          <a *ngIf="app.status === 'accepted'"
             [routerLink]="['/inbox', app._id]"
             class="btn-chat">
            <i class="fas fa-comments"></i>
            فتح الدردشة
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
