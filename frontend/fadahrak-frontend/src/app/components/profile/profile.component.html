<div class="profile-container">
  <div class="profile-header">
    <h2>الملف الشخصي</h2>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>جاري التحميل...</p>
  </div>

  <!-- Profile Content -->
  <div *ngIf="!loading" class="profile-content">
    <!-- Profile Image -->
    <div class="profile-image-section">
      <img [src]="getProfileImageUrl()" alt="صورة الملف الشخصي" class="profile-image" />
      <div *ngIf="isEditing" class="image-upload">
        <input type="file" id="fileInput" (change)="onFileSelected($event)" accept="image/*" style="display: none;" />
        <label for="fileInput" class="upload-btn">اختر صورة جديدة</label>
      </div>
    </div>

    <!-- Profile Details -->
    <div class="profile-details">
      <div class="form-group">
        <label for="name">الاسم:</label>
        <input *ngIf="!isEditing" type="text" id="name" [value]="user.name" readonly class="form-control" />
        <input *ngIf="isEditing" type="text" id="name" [(ngModel)]="user.name" class="form-control" placeholder="أدخل اسمك" />
      </div>

      <div class="form-group">
        <label for="email">البريد الإلكتروني:</label>
        <input type="email" id="email" [value]="user.email" readonly class="form-control" />
      </div>

      <div class="form-group">
        <label for="phone">رقم الهاتف:</label>
        <input *ngIf="!isEditing" type="text" id="phone" [value]="user.phone" readonly class="form-control" />
        <input *ngIf="isEditing" type="text" id="phone" [(ngModel)]="user.phone" class="form-control" placeholder="أدخل رقم هاتفك" />
      </div>

      <div class="form-group">
        <label for="role">الدور:</label>
        <input type="text" id="role" [value]="user.role" readonly class="form-control" />
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button *ngIf="!isEditing" (click)="toggleEdit()" class="btn btn-edit">تحرير</button>
      <button *ngIf="isEditing" (click)="saveProfile()" [disabled]="saving" class="btn btn-save">
        <span *ngIf="saving">جاري الحفظ...</span>
        <span *ngIf="!saving">حفظ</span>
      </button>
      <button *ngIf="isEditing" (click)="cancelEdit()" class="btn btn-cancel">إلغاء</button>
    </div>
  </div>
</div>
